# c4_tech_task_example
### –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ (C4 Model)

---

### **–ö–æ–Ω—Ç–µ–∫—Å—Ç (C1)**
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Å–≤–æ–∏–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏.  
**–¶–µ–ª—å**: –°–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π REST-–±–µ–∫–µ–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Boot 3.4, Hibernate 6, PostgreSQL –∏ Flyway.

---

### **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (C2)**
1. **Backend**: Spring Boot-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å REST API.
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–º–ø–∞–Ω–∏–π –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger UI –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (C3)**
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**:
   - –°–µ—Å—Å–∏–æ–Ω–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Spring Security.
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –≤ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (BCrypt).
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏—è–º–∏**:
   - –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ò–ù–ù, –û–ì–†–ù.
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏**:
   - –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
   - –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∫ –∫–æ–º–ø–∞–Ω–∏–∏ (1:1 –∏–ª–∏ null).
4. **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Flyway –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î.
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: OpenAPI 3.0 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

### **–ö–æ–¥ (C4)**
#### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—É—â–Ω–æ—Å—Ç—è–º**
1. **User** (–∞–∫–∫–∞—É–Ω—Ç):
   - `id`, `login` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π), `password`, `createdAt`.
2. **Company**:
   - `id`, `name` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ), `fullLegalName`, `inn` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, 10/12 —Ü–∏—Ñ—Ä), `ogrn` (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, 13 —Ü–∏—Ñ—Ä), `user` (—Å–≤—è–∑—å —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º).
3. **Employee**:
   - `id`, `firstName`, `lastName`, `middleName`, `gender` (enum: MALE, FEMALE), `age`, `maritalStatus` (enum: MARRIED, SINGLE), `company` (–º–æ–∂–µ—Ç –±—ã—Ç—å null).

#### **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**
1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
   - `POST /api/auth/register`  
     –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `{ "login": "user1", "password": "pass" }`.
   - `POST /api/auth/login`  
     –í—Ö–æ–¥ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç session cookie).
   - `POST /api/auth/logout`  
     –í—ã—Ö–æ–¥.
   - `GET /api/users/me`  
     –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.

2. **–ö–æ–º–ø–∞–Ω–∏–∏** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è):
   - `GET /api/companies`  
     –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   - `POST /api/companies`  
     –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é: `{ "name": "–û–û–û –†–æ–º–∞—à–∫–∞", "inn": "1234567890", ... }`.
   - `GET /api/companies/{id}`  
     –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é –ø–æ ID (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏).
   - `PUT /api/companies/{id}`  
     –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é.
   - `DELETE /api/companies/{id}`  
     –£–¥–∞–ª–∏—Ç—å –∫–æ–º–ø–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤).

3. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è):
   - `GET /api/employees?companyId=1`  
     –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–≤—Å–µ—Ö –∏–ª–∏ –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏).
   - `POST /api/employees`  
     –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: `{ "firstName": "–ò–≤–∞–Ω", "age": 30, ... }`.
   - `PATCH /api/employees/{id}/company`  
     –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∫–æ–º–ø–∞–Ω–∏–∏: `{ "companyId": 1 }` (–∏–ª–∏ null).
   - `PUT /api/employees/{id}`  
     –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.
   - `DELETE /api/employees/{id}`  
     –£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lombok –¥–ª—è –º–æ–¥–µ–ª–µ–π –∏ DTO.
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ (HTTP 400, 404, 409).
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Jakarta Validation (`@NotBlank`, `@Pattern` –¥–ª—è –ò–ù–ù/–û–ì–†–ù).
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).

---

### **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**
1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**:
   - –ü–∞–∫–µ—Ç—ã: `controller`, `service`, `repository`, `model`, `config`, `exception`, `dto`, `migration`.
   - –ú–æ–¥–µ–ª–∏ –ë–î –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç DTO.

2. **–ú–∏–≥—Ä–∞—Ü–∏–∏ Flyway**:
   - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã `V1__init_tables.sql`, `V2__add_constraints.sql`.
   - –ü—Ä–∏–º–µ—Ä –¥–ª—è `users`:
     ```sql
     CREATE TABLE users (
         id SERIAL PRIMARY KEY,
         login VARCHAR(50) UNIQUE NOT NULL,
         password VARCHAR(100) NOT NULL,
         created_at TIMESTAMP DEFAULT NOW()
     );
     ```

3. **Swagger**:
   - –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@Operation`, `@Schema`.
   - –ü—Ä–∏–º–µ—Ä –¥–ª—è `CompanyDTO`:
     ```java
     @Schema(name = "CompanyRequest", description = "–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏")
     public class CompanyDTO {
         @Schema(example = "–û–û–û –†–æ–º–∞—à–∫–∞", requiredMode = REQUIRED)
         private String name;
         @Schema(example = "1234567890", minLength = 10, maxLength = 12)
         private String inn;
     }
     ```

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å `@SpringBootTest`.
   - –ü—Ä–∏–º–µ—Ä: –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏ —Å –Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ò–ù–ù –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å HTTP 409.

---

### **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏**
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (Postman-–∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è).
2. –ß–∏—Å—Ç—ã–π –∫–æ–¥, —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ SOLID.
3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ `/swagger-ui.html`.
4. –ú–∏–≥—Ä–∞—Ü–∏–∏ Flyway –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

**–£–¥–∞—á–∏!** üöÄ
